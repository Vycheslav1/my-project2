{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,SAEA,MAAMC,EAAeC,SAASC,iBAAiB,uBACzCC,EAAcF,SAASG,cAAc,iBAEzCJ,EAAaK,SAASC,IAClBA,EAAMC,iBAAiB,SAAS,KAC5B,IAAIC,EAASF,EAAMG,MACvBN,EAAYO,YAAc,GAAGF,KAAU,GACvC,IAiCJ,MAAMG,EAAaV,SAASG,cAAc,gBACpCQ,EAAaX,SAASG,cAAc,iBAE1CO,EAAWJ,iBAAiB,UAAWM,IACrCA,EAAMC,iBAEN,IAAIC,EAAc,EAClB,IAAK,MAAMT,KAASN,EAClB,GAAIM,EAAMU,QAAS,CACjBD,EAAcT,EAAMG,MACpB,K,CAIJ,GAAoB,IAAhBM,EAEF,YADAE,EAAAnB,GAASoB,OAAOC,QAAQ,2BAI1B,MAAMC,EAAQR,EAAWH,MAAMY,OACf,6BACAC,KAAKF,GA/CzB,SAA6BZ,EAAQY,EAAOG,GAExC,MAAMC,EAAa,CACnBC,KAAMjB,EACNY,MAAOA,GAGPM,MAAM,GATO,iDASKC,QAAQ,C,GAACJ,GAAIf,EAAU,CACvCoB,OAAQ,QACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAUR,KAEpBS,MAAMC,IACDA,EAASC,GACXlB,EAAAnB,GAASoB,OAAOkB,QAAQ,8BAExBnB,EAAAnB,GAASoB,OAAOmB,QAAQ,yCAAyC,IAGpEC,OAAOC,IACNC,QAAQD,MAAM,SAAUA,EAAM,G,CA8BlCE,CAAoB1B,EAAaK,GAJ/BH,EAAAnB,GAASoB,OAAOC,QAAQ,sCAIyC,IAKpE,MACD,MAAMuB,EAAO,CACXC,aAAc1C,SAASG,cAAc,qBACrCwC,cAAe3C,SAASG,cAAc,sBACtCyC,MAAO5C,SAASG,cAAc,iBAMhC,SAAS0C,IACPJ,EAAKG,MAAME,UAAUC,OAAO,Y,CAJ9BN,EAAKC,aAAapC,iBAAiB,QAASuC,GAC5CJ,EAAKE,cAAcrC,iBAAiB,QAASuC,EAK9C,EAbE","sources":["src/js/add-rating.js"],"sourcesContent":["import Notiflix from 'notiflix';\n\nconst ratingInputs = document.querySelectorAll(\".star-rating__input\");\nconst ratingValue = document.querySelector(\".rating-value\");\n\n  ratingInputs.forEach((input) => {\n      input.addEventListener(\"click\", () => {\n          let rating = input.value;\n      ratingValue.textContent = `${rating}.0`;\n    });\n  });\n\n\n// Send rating to backend\nconst base_URL = 'https://tasty-treats-backend.p.goit.global/api'\n\nfunction sendRatingToBackend(rating, email, id) {\n\n    const dataToSend = {\n    rate: rating,\n    email: email,\n    };\n\n    fetch(`${base_URL/recipes/{id}/rating}`, {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(dataToSend),\n    })\n      .then((response) => {\n        if (response.ok) {\n          Notiflix.Notify.success('Rating added successfully!');\n        } else {\n          Notiflix.Notify.failure('Error adding rating. Please try again.');\n        }\n      })\n      .catch((error) => {\n        console.error('Error:', error);\n      });\n  }\n\n  const ratingForm = document.querySelector('.rating-form');\n  const emailInput = document.querySelector('.rating-email');\n\n  ratingForm.addEventListener('submit', (event) => {\n    event.preventDefault();\n\n    let ratingValue = 0;\n    for (const input of ratingInputs) {\n      if (input.checked) {\n        ratingValue = input.value;\n        break;\n      }\n    }\n\n    if (ratingValue === 0) {\n      Notiflix.Notify.warning('Please select a rating.');\n      return;\n    }\n\n    const email = emailInput.value.trim();\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(email)) {\n      Notiflix.Notify.warning('Please enter a valid email address.');\n      return;\n    }\n\n    sendRatingToBackend(ratingValue, email, /*тут має бути id страви*/);\n  });\n\n  // MODAL open-close\n\n  (() => {\n  const refs = {\n    openModalBtn: document.querySelector(\"[data-modal-open]\"),\n    closeModalBtn: document.querySelector(\"[data-modal-close]\"),\n    modal: document.querySelector(\"[data-modal]\"),\n  };\n\n  refs.openModalBtn.addEventListener(\"click\", toggleModal);\n  refs.closeModalBtn.addEventListener(\"click\", toggleModal);\n\n  function toggleModal() {\n    refs.modal.classList.toggle(\"is-hidden\");\n  }\n})();"],"names":["$7Y9D8","parcelRequire","$d94163c6b6e79836$var$ratingInputs","document","querySelectorAll","$d94163c6b6e79836$var$ratingValue","querySelector","forEach","input","addEventListener","rating","value","textContent","$d94163c6b6e79836$var$ratingForm","$d94163c6b6e79836$var$emailInput","event","preventDefault","ratingValue1","checked","$parcel$interopDefault","Notify","warning","email","trim","test","id","dataToSend","rate","fetch","recipes","method","headers","body","JSON","stringify","then","response","ok","success","failure","catch","error","console","$d94163c6b6e79836$var$sendRatingToBackend","refs","openModalBtn","closeModalBtn","modal","toggleModal","classList","toggle"],"version":3,"file":"index.8ada28a3.js.map"}