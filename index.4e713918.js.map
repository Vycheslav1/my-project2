{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,SAEMC,EAAeC,SAASC,iBAAiB,uBACzCC,EAAcF,SAASG,cAAc,iBAEzCJ,EAAaK,SAAQ,SAACC,GAClBA,EAAMC,iBAAiB,SAAS,WAC5B,IAAIC,EAASF,EAAMG,MACvBN,EAAYO,YAAc,GAAUC,OAAPH,EAAO,K,OAkCxC,IAAMI,EAAaX,SAASG,cAAc,gBACpCS,EAAaZ,SAASG,cAAc,iBAE1CQ,EAAWL,iBAAiB,UAAU,SAACO,GACrCA,EAAMC,iBAEN,IAAIC,EAAc,EACbC,GAAW,EAAXC,GAAW,EAAXC,OAAWC,E,IAAhB,QAAKC,EAAAC,EAAetB,EAAYuB,OAAAC,cAA3BP,GAAAI,EAAAC,EAAWG,QAAAC,MAAXT,GAAW,GAAX,IAAMX,EAANe,EAAWZ,MACd,GAAIH,EAAMqB,QAAS,CACjBX,EAAcV,EAAMG,MACpB,K,YAHCS,GAAW,EAAXC,EAAWS,C,aAAXX,GAAW,MAAXK,EAAWO,QAAXP,EAAWO,Q,YAAXX,E,MAAAC,C,EAOL,GAAoB,IAAhBH,EAAJ,CAKA,IAAMc,EAAQjB,EAAWJ,MAAMsB,OACf,6BACAC,KAAKF,GA/CzB,SAA6BtB,EAAQsB,EAAOG,GAExC,IAAMC,EAAa,CACnBC,KAAM3B,EACNsB,MAAOA,GAGPM,MAAM,GAAgCzB,OATzB,iDASK0B,QAAQ,CAACJ,MAAIzB,GAAU,CACvC8B,OAAQ,QACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAUR,KAEpBS,MAAK,SAACC,GACDA,EAASC,GACXC,EAAAhD,GAASiD,OAAOC,QAAQ,8BAExBF,EAAAhD,GAASiD,OAAOE,QAAQ,yC,IAG3BC,OAAM,SAACC,GACNC,QAAQD,MAAM,SAAUA,E,IA8B5BE,CAAoBrC,EAAac,GAJ/BgB,EAAAhD,GAASiD,OAAOO,QAAQ,sC,MAPxBR,EAAAhD,GAASiD,OAAOO,QAAQ,0B,IAgB3B,WACD,IAAMC,EAAO,CACXC,aAAcvD,SAASG,cAAc,qBACrCqD,cAAexD,SAASG,cAAc,sBACtCsD,MAAOzD,SAASG,cAAc,iBAMhC,SAASuD,IACPJ,EAAKG,MAAME,UAAUC,OAAO,Y,CAJ9BN,EAAKC,aAAajD,iBAAiB,QAASoD,GAC5CJ,EAAKE,cAAclD,iBAAiB,QAASoD,EAK9C,CAbE,E","sources":["src/js/add-rating.js"],"sourcesContent":["import Notiflix from 'notiflix';\n\nconst ratingInputs = document.querySelectorAll(\".star-rating__input\");\nconst ratingValue = document.querySelector(\".rating-value\");\n\n  ratingInputs.forEach((input) => {\n      input.addEventListener(\"click\", () => {\n          let rating = input.value;\n      ratingValue.textContent = `${rating}.0`;\n    });\n  });\n\n\n// Send rating to backend\nconst base_URL = 'https://tasty-treats-backend.p.goit.global/api'\n\nfunction sendRatingToBackend(rating, email, id) {\n\n    const dataToSend = {\n    rate: rating,\n    email: email,\n    };\n\n    fetch(`${base_URL/recipes/{id}/rating}`, {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(dataToSend),\n    })\n      .then((response) => {\n        if (response.ok) {\n          Notiflix.Notify.success('Rating added successfully!');\n        } else {\n          Notiflix.Notify.failure('Error adding rating. Please try again.');\n        }\n      })\n      .catch((error) => {\n        console.error('Error:', error);\n      });\n  }\n\n  const ratingForm = document.querySelector('.rating-form');\n  const emailInput = document.querySelector('.rating-email');\n\n  ratingForm.addEventListener('submit', (event) => {\n    event.preventDefault();\n\n    let ratingValue = 0;\n    for (const input of ratingInputs) {\n      if (input.checked) {\n        ratingValue = input.value;\n        break;\n      }\n    }\n\n    if (ratingValue === 0) {\n      Notiflix.Notify.warning('Please select a rating.');\n      return;\n    }\n\n    const email = emailInput.value.trim();\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!emailRegex.test(email)) {\n      Notiflix.Notify.warning('Please enter a valid email address.');\n      return;\n    }\n\n    sendRatingToBackend(ratingValue, email, /*тут має бути id страви*/);\n  });\n\n  // MODAL open-close\n\n  (() => {\n  const refs = {\n    openModalBtn: document.querySelector(\"[data-modal-open]\"),\n    closeModalBtn: document.querySelector(\"[data-modal-close]\"),\n    modal: document.querySelector(\"[data-modal]\"),\n  };\n\n  refs.openModalBtn.addEventListener(\"click\", toggleModal);\n  refs.closeModalBtn.addEventListener(\"click\", toggleModal);\n\n  function toggleModal() {\n    refs.modal.classList.toggle(\"is-hidden\");\n  }\n})();"],"names":["$6JpON","parcelRequire","$135fc15005a95962$var$ratingInputs","document","querySelectorAll","$135fc15005a95962$var$ratingValue","querySelector","forEach","input","addEventListener","rating","value","textContent","concat","$135fc15005a95962$var$ratingForm","$135fc15005a95962$var$emailInput","event","preventDefault","ratingValue1","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","checked","err","return","email","trim","test","id","dataToSend","rate","fetch","recipes","method","headers","body","JSON","stringify","then","response","ok","$parcel$interopDefault","Notify","success","failure","catch","error","console","$135fc15005a95962$var$sendRatingToBackend","warning","refs","openModalBtn","closeModalBtn","modal","toggleModal","classList","toggle"],"version":3,"file":"index.4e713918.js.map"}